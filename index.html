<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock McDo - Gestion des pertes</title>
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <div class="container">
        <div class="login-container" id="loginScreen">
            <div class="login-box">
                <h1>Stock McDo</h1>
                <p>Connectez-vous pour acc√©der √† la gestion des stocks</p>
                <form id="loginForm" onsubmit="return login(event)">
                    <div class="form-group"><label>Nom d'utilisateur</label><input type="text" id="username" required autocomplete="username"></div>
                    <div class="form-group"><label>Mot de passe</label><input type="password" id="password" required autocomplete="current-password"></div>
                    <div style="margin-bottom:12px; display:flex; align-items:center; gap:8px;">
                        <input type="checkbox" id="rememberMe" style="accent-color:#e53935; width:16px; height:16px;">
                        <label for="rememberMe" style="font-size:13px; color:#bbb; cursor:pointer;">Se souvenir de moi</label>
                    </div>
                    <button type="submit" class="login-btn">Connexion</button>
                    <div class="error-message" id="errorMessage">Identifiants incorrects</div>
                </form>
            </div>
        </div>
        <div class="app-container" id="appContainer">
            <div class="header"><h1>Stock McDo</h1><button class="logout-btn" onclick="logout()">D√©connexion</button></div>
            <div class="category-selector" id="categorySelector"><h2>S√©lectionnez une cat√©gorie</h2><p>Choisissez le type de pertes √† enregistrer</p><div class="category-buttons"><button class="category-btn" onclick="selectCategory('cuisine')">üç≥ Perte Cuisine</button><button class="category-btn" onclick="selectCategory('comptoir')">üì¶ Perte Comptoir</button></div></div>
            <div class="product-view" id="productView"><div class="product-header"><h2 id="categoryTitle">Pertes</h2><button class="back-btn" onclick="backToCategories()">‚Üê Retour</button></div><div class="product-list" id="productList"></div><div class="footer">Donn√©es sauvegard√©es automatiquement</div></div>
        </div>
    </div>
    <script>
        const CREDENTIALS = { username: 'admin', password: 'admin' };
        const produitsParCategorie = { cuisine: ['Big Mac', 'McChicken', 'Royal Deluxe', 'Frites M', 'Frites L', 'Nuggets 4', 'Nuggets 9', 'Nuggets 20', 'Crousty Poulet', "P'tit Wrap Ranch", 'Double Cheese', 'Filet-O-Fish'], comptoir: ['Coca-Cola M', 'Coca-Cola L', 'Sprite M', 'Fanta M', 'McFlurry Oreo', "McFlurry M&M's", 'Sundae Caramel', 'Sundae Chocolat', 'Milk-shake Vanille', 'Caf√©', 'Cappuccino', 'Muffin'] };
        let currentCategory = null;

        function checkAuth() {
            const isLoggedIn = localStorage.getItem('isLoggedIn') === 'true';
            if (isLoggedIn) {
                showApp();
            } else {
                showLogin();
                // Pr√©-remplir les champs si rememberMe est activ√©, APRES affichage du login
                setTimeout(() => {
                    const savedLogin = localStorage.getItem('rememberLogin');
                    if (savedLogin) {
                        try {
                            const creds = JSON.parse(savedLogin);
                            document.getElementById('username').value = creds.username || '';
                            document.getElementById('password').value = creds.password || '';
                            document.getElementById('rememberMe').checked = true;
                        } catch(e) {}
                    }
                }, 0);
            }
        }

        function showLogin() {
            document.getElementById('loginScreen').style.display = 'flex';
            document.getElementById('appContainer').classList.remove('active');
        }

        function showApp() {
            document.getElementById('loginScreen').style.display = 'none';
            document.getElementById('appContainer').classList.add('active');
            document.getElementById('categorySelector').style.display = 'flex';
            document.getElementById('productView').classList.remove('active');
        }

        function login(event) {
            // ...existing code...
